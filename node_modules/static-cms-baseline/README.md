# Statis CMS Baseline
This framework provides a Jekyll project that is organized and optimized for Webdev team.
This includes:
- An organized architecture.
- A workflow to build and serve single page applications.
- User management system.
- Base stylesheet with Twitter Bootstrap.
- The scripts to initialize and update(not yet) baseline site.

## 1. How to install this baseline
1. Create an empty directory or go into existing empty repository.
2. Create a ```package.json``` file in the directory to install the baseline as a npm dependency.
3. Copy and paste the following config.
```
{
  "name": "my-jekyll-site-name",
  "version": "1.0.0",
  "description": "",
  "author": "Koji Miyauchi",
  "license": "MIT",
  "scripts": {
    "init": "./node_modules/.bin/webdev-baseline-init",
    "update": "./node_modules/.bin/webdev-baseline-update"
  },
  "dependencies": {
    "static-cms-baseline": "git+ssh://git@github.com:oicr-webdev/webdev_static-cms-baseline.git"
  }
}
```
4. Run ```npm install``` to download the baseline.
5. Run ```npm run init``` to copy baseline directory and files into the current project root. (You will also able to find baseilne source code in ```node_modules/static-cms-baseline/src```)
6. Copy .gitignore file from ```node_modules/static-cms-baseline/src/.gitignore``` to your project.

### 2. Enable UMS
1. Make ```pages/ums.md``` published.
2. Comment in the ums entry in ```_app/configs/entries.js```
3. Comment in the include statement for footer_scripts in ```_layouts/default.tpl```

### 3. Compile files with UMS
1. Go to _app directory by ```cd _app```
2. Run ```npm install``` to install all the dependencies.
3. Run ```npm start``` or ```npm build``` to compile files.
4. Go back to your root folder and run ```jekyll serve```


## Structure
```
_app/
  configs/
    entries.js (list of entry files that webpack is going to bundle)
    env_theme.dev.js (environment set up for dev)
    env_theme.prod.js (environment set up for production)
  src/
    core/
      ...
      webpack.config.js 
    site/
      ...
      store.js (Global redux-store)
      webpack.config.js (Custom webpack config for a site)
  package.json
_includes/
  core/
  dist/(Auto-generated by webpack)
  site/
_layouts/
  default.tpl
  home.tpl
_sass/
  core/
  site/
_assets/
  core/
  dist/(Auto-generated by webpack)
  site/
_pages/
  home.md 
  ums.md
_config.yml
favicon.ico
Gemfile
```

### 1 .core, dist, site

You can find following directories in some places and each directory has a meaning.

- **core/**

    This is provided by the baseline. These codes can be modified by the future update of the baseline. Thus, you shouldn't touch the files.

- **dist/**
    
    This is auto-generated by Webpack. Bundled javascript file, CSS file will be in this directory.

- **site/**
    
    This is a site specific folders that you can put any files you want to develop your website.
